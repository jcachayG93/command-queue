name: test
on:
  push:
    branches: [main] # remove later
  release:
    types: [created]
jobs:
  say-hello:
    runs-on: ubuntu-latest
    defaults:
     run:
      working-directory: src/workspace
    permissions:
     contents: read
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18.x'
      - name: install packages
        run: npm i
      - name: build
        run: npm run ng build --project jcg-command-queue
      - name: test
        run: npm run test

#jobs:
#  build:
#    runs-on: ubuntu-latest
#    defaults:
#      run:
#        working-directory: ./dist/jcg-command-queue
#    permissions:
#      contents: read
#      packages: write
#    steps:
#      - uses: actions/checkout@v3
#      # Setup .npmrc file to publish to npm
#      - uses: actions/setup-node@v3
#        with:
#          node-version: '18.x'
#          registry-url: 'https://registry.npmjs.org'
#          scope: '@jcachay'
#      - run: npm ci
      #- run: npm publish
      #  env:
      #    NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
